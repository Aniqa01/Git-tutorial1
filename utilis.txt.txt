This is the utility function for first version
